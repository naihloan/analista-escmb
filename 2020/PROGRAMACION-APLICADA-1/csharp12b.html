<!doctype html><!--[if IE 9]><html class="lt-ie10" lang="es" > <![endif]--><html class="no-js" lang="es" 
    data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Programación en C# - 12.2. Más posibilidades de la consola</title>

    
    <meta name="description" content="12.2. Más posibilidades de la consola - Por Nacho Cabanes" />
    
    <meta name="author" content="Nacho Cabanes" />
    <meta name="keywords" content="Console,ReadKey,Clear,ConsoleKeyInfo" />

    <link rel="stylesheet" href="../../css/foundation.css" />
    <script src="../../js/modernizr.js"></script>
    <style type="text/css">
    pre {
      background: #F2F2F2;
      padding: 15px;
      line-height: 1.5em;
      font-size: 1.1em;
      display: block;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
    p {
      margin-bottom: 0.5rem;
      margin-top: 0.5rem;
    }
    </style>
  </head>
  <body>
    
<!-- Navegación (Nav) -->
 
  <nav class="top-bar" data-topbar>
    <ul class="title-area">
      <!-- Título -->
      <li class="name">
        <h1>
          <a href="#">
            Programación en C# - 12.2. Más posibilidades de la consola          </a>
        </h1>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>menu</span></a></li>
    </ul>
 
    <section class="top-bar-section">
      <!-- Navegación derecha -->
      <ul class="right">
          <li class="divider"></li>
          <li><a href="index.php">Índice</a></li>
          <li class="divider"></li>
            <li><a href="csharp12.php">Anterior</a></li>
            <li class="divider"></li>
            <li><a href="csharp12c.php">Posterior</a></li>
            <li class="divider"></li>
            <li><a href="../../">NachoCabanes.com</a></li>
      </ul>
    </section>
  </nav>
 
  <!-- Fin de la barra superior -->
  
  
    <!-- Aviso cookies -->
            
      <div class="row">
         <div class="col-md-12">
            <div data-alert class="alert-box">
                Este sitio web usa cookies de terceros para
                analizar el tráfico y personalizar los anuncios.
                Si no está de acuerdo, abandone el sitio y no siga
                navegando por él.
                <a href="#" class="close">&times;</a>
            </div>
         </div>
     </div>
     
     
          <!-- Fin de aviso cookies -->
 
  <div class="row">
    <div class="large-12 columns">
 
       
    <style type="text/css">
.top-bar {
  background: #8800CC;
}
.top-bar-section li:not(.has-form) a:not(.button) {
  background: #8800CC;
}

</style>        <p style="text-align: center"><br />
      <script type="text/javascript"><!--
        google_ad_client = "pub-4298821349414973";
        google_ad_width = 320;
        google_ad_height = 50;
        google_ad_format = "320x50_as";
        google_ad_type = "text_image";
        google_ad_channel ="";
        google_color_border = "D1D1D1";
        google_color_bg = "FFFFFF";
        google_color_link = "516695";
        google_color_url = "516695";
        google_color_text = "000000";
//--></script>
      <script type="text/javascript"
 src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
      </p>
        

<h3>12.2. Más posibilidades de la consola</h3>

<p>En "Console" hay mucho más que ReadLine y WriteLine, aunque no todas las posibilidades están incluidas en las primeras versiones de la "plataforma punto net". Vamos a ver algunas de las funcionalidades adicionales que nos pueden resultar más útiles:</p>

<ul>

    <li>Clear: borra la pantalla.</li>
    <li>ForegroundColor: cambia el color de primer plano (para indicar los colores, hay definidas constantes como "ConsoleColor.Black", que se detallan al final de este apartado).</li>
    <li>BackgroundColor: cambia el color de fondo (para el texto que se escriba a partir de entonces; si se quiere borrar la pantalla con un cierto color, se deberá primero cambiar el color de fondo y después usar "Clear").</li>
    <li>SetCursorPosition(x, y): cambia la posición del cursor ("x" se empieza a contar desde el margen izquierdo, e "y" desde la parte superior de la pantalla).</li>
    <li>Readkey(interceptar): lee una tecla desde teclado. El parámetro "interceptar" es un "bool", y es opcional. Indica si se debe capturar la tecla sin permitir que se vea en pantalla ("true" para que no se vea, "false" para que se pueda ver). Si no se indica este parámetro, la tecla se muestra en pantalla.</li>
    <li>KeyAvailable: indica si hay alguna tecla disponible para ser leída (es un "bool")</li>
    <li>Title: el título que se va a mostrar en la consola (es un "string")</li>

</ul>

<p><pre class="csharp csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// Ejemplo_12_02a.cs</span>
<span style="color: #008080; font-style: italic;">// Más posibilidades de &quot;System.Console&quot;</span>
<span style="color: #008080; font-style: italic;">// Introducción a C#, por Nacho Cabanes</span>
&nbsp;
<span style="color: #0600FF;">using</span> <span style="color: #008080;">System</span>;
&nbsp;
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> Ejemplo_12_02a
<span style="color: #000000;">&#123;</span>
    <span style="color: #0600FF;">public</span> <span style="color: #0600FF;">static</span> <span style="color: #0600FF;">void</span> Main<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
    <span style="color: #000000;">&#123;</span>
        <span style="color: #FF0000;">int</span> posX, posY;
&nbsp;
        Console.<span style="color: #0000FF;">Title</span> <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;Ejemplo de consola&quot;</span>;
        Console.<span style="color: #0000FF;">BackgroundColor</span> <span style="color: #008000;">=</span> ConsoleColor.<span style="color: #0000FF;">Green</span>;
        Console.<span style="color: #0000FF;">ForegroundColor</span> <span style="color: #008000;">=</span> ConsoleColor.<span style="color: #0000FF;">Black</span>;
        Console.<span style="color: #0000FF;">Clear</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
&nbsp;
        posY <span style="color: #008000;">=</span> <span style="color: #FF0000;">10</span>;  <span style="color: #008080; font-style: italic;">// En la fila 10</span>
        Random r <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> Random<span style="color: #000000;">&#40;</span>DateTime.<span style="color: #0000FF;">Now</span>.<span style="color: #0000FF;">Millisecond</span><span style="color: #000000;">&#41;</span>;
        posX <span style="color: #008000;">=</span> r.<span style="color: #0000FF;">Next</span><span style="color: #000000;">&#40;</span><span style="color: #FF0000;">20</span>, <span style="color: #FF0000;">40</span><span style="color: #000000;">&#41;</span>; <span style="color: #008080; font-style: italic;">// Columna al azar entre 20 y 40</span>
        Console.<span style="color: #0000FF;">SetCursorPosition</span><span style="color: #000000;">&#40;</span>posX, posY<span style="color: #000000;">&#41;</span>;
        Console.<span style="color: #0000FF;">WriteLine</span><span style="color: #000000;">&#40;</span><span style="color: #666666;">&quot;Bienvenido&quot;</span><span style="color: #000000;">&#41;</span>;
&nbsp;
        Console.<span style="color: #0000FF;">ForegroundColor</span> <span style="color: #008000;">=</span> ConsoleColor.<span style="color: #0000FF;">Blue</span>;
        Console.<span style="color: #0000FF;">SetCursorPosition</span><span style="color: #000000;">&#40;</span><span style="color: #FF0000;">10</span>, <span style="color: #FF0000;">15</span><span style="color: #000000;">&#41;</span>;
        Console.<span style="color: #0000FF;">Write</span><span style="color: #000000;">&#40;</span><span style="color: #666666;">&quot;Pulsa 1 o 2: &quot;</span><span style="color: #000000;">&#41;</span>;
        ConsoleKeyInfo tecla;
        <span style="color: #0600FF;">do</span> 
        <span style="color: #000000;">&#123;</span>
            tecla <span style="color: #008000;">=</span> Console.<span style="color: #0000FF;">ReadKey</span><span style="color: #000000;">&#40;</span><span style="color: #0600FF;">false</span><span style="color: #000000;">&#41;</span>;
        <span style="color: #000000;">&#125;</span> 
        <span style="color: #0600FF;">while</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">KeyChar</span> <span style="color: #008000;">!=</span> <span style="color: #666666;">'1'</span><span style="color: #000000;">&#41;</span> <span style="color: #008000;">&amp;&amp;</span> <span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">KeyChar</span> <span style="color: #008000;">!=</span> <span style="color: #666666;">'2'</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
&nbsp;
        <span style="color: #FF0000;">int</span> maxY <span style="color: #008000;">=</span> Console.<span style="color: #0000FF;">WindowHeight</span>;
        <span style="color: #FF0000;">int</span> maxX <span style="color: #008000;">=</span> Console.<span style="color: #0000FF;">WindowWidth</span>;
        Console.<span style="color: #0000FF;">SetCursorPosition</span><span style="color: #000000;">&#40;</span>maxX<span style="color: #008000;">-</span><span style="color: #FF0000;">50</span>, maxY<span style="color: #008000;">-</span><span style="color: #FF0000;">1</span><span style="color: #000000;">&#41;</span>;
        Console.<span style="color: #0000FF;">ForegroundColor</span> <span style="color: #008000;">=</span> ConsoleColor.<span style="color: #0000FF;">Red</span>;
        Console.<span style="color: #0000FF;">Write</span><span style="color: #000000;">&#40;</span><span style="color: #666666;">&quot;Pulsa una tecla para terminar... &quot;</span><span style="color: #000000;">&#41;</span>;    
        Console.<span style="color: #0000FF;">ReadKey</span><span style="color: #000000;">&#40;</span><span style="color: #0600FF;">true</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">&#125;</span>  
<span style="color: #000000;">&#125;</span>
&nbsp;</pre></p>
<p>(Nota: no todas las posibilidades que se aplican en este ejemplo están disponibles en la plataforma .Net 1.x, sino a partir de la versión 2).</p>

<p>Para comprobar el valor  de una tecla, como se ve en el ejemplo anterior, tenemos que usar una variable de tipo "ConsoleKeyInfo" (información de tecla de consola). Un ConsoleKeyInfo tiene campos como:</p>

<ul>

    <li>KeyChar, que representa el carácter que se escribiría al pulsar esa tecla. Por ejemplo, podríamos hacer if (tecla.KeyChar == '1') ...</li>
    
    <li>Key, que se refiere a la tecla (porque hay teclas que no tienen un carácter visualizable, como F1 o las teclas de cursor).  Por ejemplo, para comprobar la tecla ESC podríamos hacer   if (tecla.Key == ConsoleKey.Escape) ... . Algunos de los códigos de tecla disponibles son:</li>
    
    <ul>
        
        <li>Teclas de edición y control como, como: Backspace (Tecla RETROCESO), Tab (Tecla TAB), Clear (Tecla BORRAR), Enter (Tecla ENTRAR), Pause (Tecla PAUSA), Escape (Tecla ESC (ESCAPE)), Spacebar (Tecla BARRA ESPACIADORA), PrintScreen (Tecla IMPR PANT), Insert (Tecla INS (INSERT)), Delete (Tecla SUPR (SUPRIMIR))</li>
        <li>Teclas de movimiento del cursor, como: PageUp (Tecla RE PÁG), PageDown (Tecla AV PÁG), End (Tecla FIN), Home (Tecla INICIO), LeftArrow (Tecla FLECHA IZQUIERDA), UpArrow (Tecla FLECHA ARRIBA), RightArrow (Tecla FLECHA DERECHA), DownArrow (Tecla FLECHA ABAJO)</li>
        <li>Teclas alfabéticas, como: A (Tecla A), B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z</li>
        <li>Teclas numéricas, como: D0 (Tecla 0), D1, D2, D3, D4, D5, D6, D7, D8, D9</li>
        <li>Teclado numérico adicional: NumPad0 (Tecla 0 del teclado numérico), NumPad1, NumPad2, NumPad3, NumPad4, NumPad5, NumPad6, NumPad7, NumPad8, NumPad9, Multiply (Tecla Multiplicación), Add (Tecla Agregar), Separator (Tecla Separador), Subtract (Tecla Resta), Decimal (Tecla Decimal), Divide (Tecla División)</li>
        <li>Sleep (Tecla Espera del equipo)</li>
        <li>Teclas de función: F1, F2 y sucesivas (hasta F24)</li>
        <li>Teclas especiales de Windows: LeftWindows (Tecla izquierda con el logotipo de Windows), RightWindows (Tecla derecha con el logotipo de Windows)</li>
        <li>Incluso teclas multimedia, si el teclado las incorpora, como: VolumeMute (Tecla Silenciar el volumen, enMicrosoft Natural Keyboard, bajo Windows 2000 o posterior), VolumeDown (Bajar el volumen, ídem), VolumeUp (Subir el volumen), MediaNext (Tecla Siguiente pista de multimedia), etc.</li>
        <li>Modifiers, que permite comprobar si se han pulsado simultáneamente teclas modificadoras: Alt, Shift o Control. Un ejemplo de su uso sería: </li>
            
    </ul>

</ul>

<p><pre class="csharp csharp" style="font-family:monospace;">        <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">Modifiers</span> <span style="color: #008000;">&amp;</span> ConsoleModifiers.<span style="color: #0000FF;">Alt</span><span style="color: #000000;">&#41;</span> <span style="color: #008000;">!=</span> 0<span style="color: #000000;">&#41;</span>  
            Console.<span style="color: #0000FF;">Write</span><span style="color: #000000;">&#40;</span><span style="color: #666666;">&quot;Has pulsado Alt&quot;</span><span style="color: #000000;">&#41;</span>;</pre></p>

<p>Console.Readkey hace que el programa se quede <b>parado</b> hasta que se pulse una tecla. Si queremos hacer algo mientras que el usuario no pulse ninguna tecla, podemos emplear Console.KeyAvailable para comprobar si ya se ha pulsado alguna tecla que haya que analizar, como en este ejemplo, que permite mover un símbolo a izquierda y derecha, pero muestra una animación simple si no pulsamos ninguna tecla:</p>

<p><pre class="csharp csharp" style="font-family:monospace;"><span style="color: #008080; font-style: italic;">// Ejemplo_12_02b.cs</span>
<span style="color: #008080; font-style: italic;">// No bloquear el programa con Console.Readkey</span>
<span style="color: #008080; font-style: italic;">// Introducción a C#, por Nacho Cabanes</span>
&nbsp;
<span style="color: #0600FF;">using</span> <span style="color: #008080;">System</span>;
<span style="color: #0600FF;">using</span> <span style="color: #008080;">System.Threading</span>;
&nbsp;
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> Ejemplo_12_02b
<span style="color: #000000;">&#123;</span>
    <span style="color: #0600FF;">public</span> <span style="color: #0600FF;">static</span> <span style="color: #0600FF;">void</span> Main<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
    <span style="color: #000000;">&#123;</span>
        <span style="color: #FF0000;">int</span> posX<span style="color: #008000;">=</span><span style="color: #FF0000;">40</span>, posY<span style="color: #008000;">=</span><span style="color: #FF0000;">10</span>;
        <span style="color: #FF0000;">string</span> simbolos <span style="color: #008000;">=</span> <span style="color: #666666;">&quot;^&gt;v&lt;&quot;</span>;
        <span style="color: #FF0000;">byte</span> simboloActual <span style="color: #008000;">=</span> 0;
        <span style="color: #FF0000;">bool</span> terminado <span style="color: #008000;">=</span> false;
&nbsp;
        <span style="color: #0600FF;">do</span>
        <span style="color: #000000;">&#123;</span>
            Console.<span style="color: #0000FF;">Clear</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
            Console.<span style="color: #0000FF;">SetCursorPosition</span><span style="color: #000000;">&#40;</span>posX, posY<span style="color: #000000;">&#41;</span>;
            Console.<span style="color: #0000FF;">Write</span><span style="color: #000000;">&#40;</span> simbolos<span style="color: #000000;">&#91;</span> simboloActual <span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span>;
            Thread.<span style="color: #0000FF;">Sleep</span><span style="color: #000000;">&#40;</span><span style="color: #FF0000;">500</span><span style="color: #000000;">&#41;</span>;
            <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span>Console.<span style="color: #0000FF;">KeyAvailable</span><span style="color: #000000;">&#41;</span>
            <span style="color: #000000;">&#123;</span>
                ConsoleKeyInfo tecla <span style="color: #008000;">=</span> Console.<span style="color: #0000FF;">ReadKey</span><span style="color: #000000;">&#40;</span><span style="color: #0600FF;">true</span><span style="color: #000000;">&#41;</span>;
                <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">Key</span> <span style="color: #008000;">==</span> ConsoleKey.<span style="color: #0000FF;">RightArrow</span><span style="color: #000000;">&#41;</span> posX++;
                <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">Key</span> <span style="color: #008000;">==</span> ConsoleKey.<span style="color: #0000FF;">LeftArrow</span><span style="color: #000000;">&#41;</span> posX--;
                <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span>tecla.<span style="color: #0000FF;">Key</span> <span style="color: #008000;">==</span> ConsoleKey.<span style="color: #0000FF;">Escape</span><span style="color: #000000;">&#41;</span> terminado <span style="color: #008000;">=</span> true;
            <span style="color: #000000;">&#125;</span>
            simboloActual++;
            <span style="color: #0600FF;">if</span> <span style="color: #000000;">&#40;</span>simboloActual <span style="color: #008000;">&gt;</span> <span style="color: #FF0000;">3</span><span style="color: #000000;">&#41;</span> simboloActual <span style="color: #008000;">=</span> 0;
        <span style="color: #000000;">&#125;</span>
        <span style="color: #0600FF;">while</span> <span style="color: #000000;">&#40;</span> <span style="color: #008000;">!</span> terminado <span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">&#125;</span>  
<span style="color: #000000;">&#125;</span>
&nbsp;</pre></p>
<p>Al igual que en este ejemplo, será recomendable hacer una pequeña <b>pausa</b> entre una comprobación de teclas y la siguiente, con Thread.Sleep, tanto para que la animación no sea demasiado rápida como para no hacer un consumo muy alto de procesador para tareas poco importantes.</p>

<p>Los <b>colores</b> que tenemos disponibles (y que se deben escribir precedidos con "ConsoleColor") son: Black (negro), DarkBlue (azul marino),  DarkGreen (verde oscuro) DarkCyan (verde azulado oscuro), DarkRed (rojo oscuro), DarkMagenta (fucsia oscuro o púrpura), DarkYellow (amarillo oscuro  u ocre), Gray (gris), DarkGray (gris oscuro), Blue (azul), Green (verde), Cyan (aguamarina o verde azulado claro), Red (rojo), Magenta (fucsia), Yellow (amarillo), White (blanco).</p>

<p><b>Ejercicios propuestos:</b></p>

<blockquote><i><b>Ejercicio propuesto 12.2.1:</b> Crea un programa que muestre una "pelota" (la letra "O") rebotando en los bordes de la pantalla. Para que no se mueva demasiado rápido, haz una pausa de 50 milisegundos entre un "fotograma" y otro.</i></blockquote><blockquote><i><b>Ejercicio propuesto 12.2.2:</b> Crea una versión de la "base de datos de ficheros" (ejemplo 04_06a) que use colores para ayudar a distinguir los mensajes del programa de las respuestas del usuario, y que no necesite pulsar Intro tras escoger cada opción.</i></blockquote><blockquote><i><b>Ejercicio propuesto 12.2.3:</b> Crea un programa que permita "dibujar" en consola, moviendo el cursor con las flechas del teclado y pulsando "espacio" para dibujar un punto o borrarlo.</i></blockquote><blockquote><i><b>Ejercicio propuesto 12.2.4:</b> Crea una versión del programa de "dibujar" en consola (12.2.3), que permita escribir más caracteres (por ejemplo, las letras), así como mostrar ayuda (pulsando F1), guardar el contenido de la pantalla en un fichero de texto (con F2) o recuperarlo (con F3).</i></blockquote><blockquote><i><b>Ejercicio propuesto 12.2.5:</b> Crea una versión mejorada del programa 12.1.2 (mostrar el reloj actualizado en pantalla, que lo dibuje siempre en la esquina superior derecha de la pantalla).</i></blockquote>
        <p style="text-align: center"><br />
      <script type="text/javascript"><!--
        google_ad_client = "pub-4298821349414973";
        google_ad_width = 320;
        google_ad_height = 50;
        google_ad_format = "320x50_as";
        google_ad_type = "text_image";
        google_ad_channel ="";
        google_color_border = "D1D1D1";
        google_color_bg = "FFFFFF";
        google_color_link = "516695";
        google_color_url = "516695";
        google_color_text = "000000";
//--></script>
      <script type="text/javascript"
 src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
      </p>
                   </div>
        </div>
      </div>
      
    <!-- Pie (Footer) -->
 
      <footer class="row">
        <div class="large-12 columns"><hr>
            <div class="row">
 
              <div class="large-6 columns">
                  <p>&copy; 2015 <a href="http://www.nachocabanes.com">Nacho Cabanes</a>
                   6520 visitas desde el 13-01-2015</p>
              </div>
 
              <div class="large-6 small-12 columns">
                  <ul class="inline-list right">
                    <li><a href="index.php">Índice</a></li>
                    <li><a href="csharp12.php">Anterior</a></li>
                    <li><a href="csharp12c.php">Posterior</a></li>
                    <li><a href="../../">NachoCabanes.com</a></li>
                  </ul>
              </div>
 
            </div>
        </div>
      </footer>
 
    <!-- Fin del pie -->
 
    </div>
  </div>
 
    <script src="../../js/jquery.js"></script>
    <script src="../../js/foundation.min.js"></script>
    <script>
      $(document).foundation();

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
    </script>
    
    
  </body>
</html>
        
